<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Binned residuals for binomial logistic regression — binned_residuals • performance</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Binned residuals for binomial logistic regression — binned_residuals"><meta property="og:description" content="Check model quality of binomial logistic regression models."><meta property="og:image" content="https://easystats.github.io/performance/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">performance</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Features</a>
</li>
<li>
  <a href="../articles/compare.html">Compare, Test and Select Models</a>
</li>
<li>
  <a href="../articles/r2.html">Explained Variance (R-Squared)</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://twitter.com/easystats4u" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/easystats/performance/" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Binned residuals for binomial logistic regression</h1>
    <small class="dont-index">Source: <a href="https://github.com/easystats/performance/blob/HEAD/R/binned_residuals.R" class="external-link"><code>R/binned_residuals.R</code></a></small>
    <div class="hidden name"><code>binned_residuals.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Check model quality of binomial logistic regression models.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">binned_residuals</span><span class="op">(</span><span class="va">model</span>, term <span class="op">=</span> <span class="cn">NULL</span>, n_bins <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>model</dt>
<dd><p>A <code>glm</code>-object with <em>binomial</em>-family.</p></dd>
<dt>term</dt>
<dd><p>Name of independent variable from <code>x</code>. If not <code>NULL</code>,
average residuals for the categories of <code>term</code> are plotted; else,
average residuals for the estimated probabilities of the response are
plotted.</p></dd>
<dt>n_bins</dt>
<dd><p>Numeric, the number of bins to divide the data. If
<code>n_bins = NULL</code>, the square root of the number of observations is
taken.</p></dd>
<dt>...</dt>
<dd><p>Further argument like <code>size</code> (for point-size) or
<code>color</code> (for point-colors).</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame representing the data that is mapped in the accompanying
plot. In case all residuals are inside the error bounds, points are black.
If some of the residuals are outside the error bounds (indicated by the
grey-shaded area), blue points indicate residuals that are OK, while red
points indicate model under- or over-fitting for the relevant range of
estimated probabilities.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Binned residual plots are achieved by “dividing the data into
categories (bins) based on their fitted values, and then plotting
the average residual versus the average fitted value for each bin.”
<cite>(Gelman, Hill 2007: 97)</cite>. If the model were true, one would
expect about 95\<!-- % of the residuals to fall inside the error bounds. -->
<br><br>
If <code>term</code> is not <code>NULL</code>, one can compare the residuals in
relation to a specific model predictor. This may be helpful to check if a
term would fit better when transformed, e.g. a rising and falling pattern
of residuals along the x-axis is a signal to consider taking the logarithm
of the predictor (cf. Gelman and Hill 2007, pp. 97-98).</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Since <code>binned_residuals()</code> returns a data frame, the default
action for the result is <em>printing</em>. However, the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>-method for
<code>binned_residuals()</code> actually creates a plot. For further
modifications of the plot, use <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> and add ggplot-layers to the
return values, e.g. <code>print(binned_residuals(model)) + see::scale_color_pizza()</code>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Gelman, A., &amp; Hill, J. (2007). Data analysis using regression and
multilevel/hierarchical models. Cambridge; New York: Cambridge University
Press.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://easystats.github.io/see/" class="external-link">"see"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="co"># creating a model</span></span>
<span class="r-in">  <span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">vs</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">mpg</span>, data <span class="op">=</span> <span class="va">mtcars</span>, family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># this will automatically plot the results</span></span>
<span class="r-in">  <span class="op">(</span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">binned_residuals</span><span class="op">(</span><span class="va">model</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="co"># if you assign results to an object, you can also look at the dataframe</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: see</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">Warning: Probably bad model fit. Only about 50% of the residuals are inside the error bounds.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         xbar        ybar n       x.lo       x.hi         se group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.03786483 -0.03786483 5 0.01744776 0.06917366 0.01937882    no</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.09514191 -0.09514191 5 0.07087498 0.15160143 0.02873921    no</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.25910531  0.07422802 6 0.17159955 0.35374001 0.43367801   yes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.47954643 -0.07954643 5 0.38363314 0.54063600 0.50744089   yes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.71108931  0.28891069 5 0.57299903 0.89141359 0.11199575    no</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.97119262 -0.13785929 6 0.91147360 0.99815623 0.30981245   yes</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>, <a href="https://dominiquemakowski.github.io/" class="external-link">Dominique Makowski</a>, <a href="https://github.com/mattansb" class="external-link">Mattan S. Ben-Shachar</a>, <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>, Philip Waggoner, <a href="https://wiernik.org/" class="external-link">Brenton M. Wiernik</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

